(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{129:function(e,t,s){},131:function(e,t,s){},178:function(e,t,s){},179:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),a=s(36),r=s.n(a),l=(s(129),s(10)),i=s.n(l),o=s(17),j=s(6),d=(s(131),s(14)),u=s(12),b=s(5),h=s(22),O=s.p+"static/media/logo.971141ba.png",x=s(3),f=function(){return Object(x.jsxs)("div",{className:"d-flex w-100 flex-md-row flex-column",children:[Object(x.jsx)(d.b,{className:"btn btn-primary p-4 w-100 me-md-4 mb-3",to:"/students",children:"Manage Students"}),Object(x.jsx)(d.b,{className:"btn btn-primary p-4 w-100 me-md-4 mb-3",to:"/staffs",children:"Manage Staffs"}),Object(x.jsx)(d.b,{className:"btn btn-primary p-4 w-100 mb-3",to:"/courses",children:"Manage Courses"})]})},m=function(){return Object(x.jsx)("div",{})},p=s(26),g=function(e){var t=e.user,s=(e.courses,e.setCourses),n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=a[0],l=a[1],d=Object(c.useState)(""),O=Object(j.a)(d,2),f=O[0],m=O[1],g=Object(c.useState)(!1),v=Object(j.a)(g,2),N=v[0],y=v[1],w=Object(u.f)(),S=function(){var e=Object(o.a)(i.a.mark((function e(c){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),l(!0),e.next=4,fetch("http://localhost:5000/api/users/student/"+t.reg_no+"/courses/"+f+"/enroll",{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({course_id:f})});case 4:if(!(n=e.sent).ok){e.next=14;break}return e.next=8,n.json();case 8:n=e.sent,console.log(n),s((function(e){return[].concat(Object(p.a)(e),[{course_id:f,course_name:n.course_name}])})),w("/courses/"+f),e.next=16;break;case 14:y(!0),console.log("Could not enroll");case 16:l(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"d-flex w-100 justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3",children:Object(x.jsxs)(b.b,{className:"col-12 col-md-3",onSubmit:S,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)("h5",{className:"text-center",children:"Enroll in a course"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:f,placeholder:"Course ID",onChange:function(e){y(!1),m(e.target.value)},required:!0,invalid:N}),Object(x.jsx)(b.c,{invalid:!0,children:"Invalid course ID or you are already enrolled"})]}),Object(x.jsx)(b.d,{className:"text-center pt-1",children:Object(x.jsx)(b.a,{className:"btn btn-dark",style:{width:70,height:40},type:"submit",children:r?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Enroll"})})]})})})},v=function(e){var t=e.user,s=e.setUser,n=e.courses,a=e.setCourses,r=Object(c.useState)(""),l=Object(j.a)(r,2),u=l[0],p=l[1],v=Object(c.useState)(""),N=Object(j.a)(v,2),y=N[0],w=N[1],S=Object(c.useState)(!1),k=Object(j.a)(S,2),C=k[0],_=k[1],T=Object(c.useState)(""),E=Object(j.a)(T,2),D=E[0],M=E[1],A=function(){var e=Object(o.a)(i.a.mark((function e(t){var c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),u){e.next=4;break}return M("Enter Registration Number or Email"),e.abrupt("return");case 4:if(y){e.next=7;break}return M("Enter Password"),e.abrupt("return");case 7:return _(!0),e.next=10,fetch("http://localhost:5000/api/users/login",{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({reg_no:u,password:y})});case 10:if(!(c=e.sent).ok){e.next=26;break}return e.next=14,c.json();case 14:if(c=e.sent,s(c),"student"!==c.role&&"staff"!==c.role){e.next=24;break}return e.next=19,fetch("http://localhost:5000/api/users/"+c.role+"/"+c.reg_no+"/courses",{headers:{"Content-Type":"application/json"},credentials:"include"});case 19:return n=e.sent,e.next=22,n.json();case 22:n=e.sent,a(n);case 24:e.next=28;break;case 26:401===c.status?M("Invalid Email or Password"):M("Something went wrong!"),s(null);case 28:_(!1);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t&&t.role?"admin"===t.role?Object(x.jsx)(f,{}):"staff"===t.role?Object(x.jsx)(m,{}):"student"===t.role?Object(x.jsx)(g,{user:t,courses:n,setCourses:a}):void 0:Object(x.jsx)("div",{className:"pt-4",children:Object(x.jsxs)("div",{className:"w-100 d-flex justify-content-between flex-md-row flex-column",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Manage Attendance"}),Object(x.jsxs)(b.b,{className:"w-100 mt-4 shadow pt-4 ps-4 pe-4 pb-2 rounded",onSubmit:A,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{className:"mb-1",children:"Registration Number / Email ID"}),Object(x.jsx)(b.e,{className:"mb-3",type:"text",value:u,placeholder:"Reg. No. / Email",onChange:function(e){M(" "),p(e.target.value)}})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{className:"mb-1",children:"Password"}),Object(x.jsx)(b.e,{className:"mb-3",type:"password",value:y,placeholder:"Password",onChange:function(e){M(" "),w(e.target.value)}})]}),Object(x.jsx)(b.d,{className:"text-center",children:Object(x.jsx)(b.a,{style:{width:100},className:"btn btn-md btn-grey mt-2",children:C?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Log In"})}),Object(x.jsxs)(b.d,{className:"text-center",children:[""!==D&&Object(x.jsx)("div",{className:"pb-2",children:Object(x.jsx)("span",{className:"text-danger",children:D})}),Object(x.jsx)("div",{children:Object(x.jsx)(d.b,{to:"/forgot-password",children:"Forgot Password"})})]})]}),Object(x.jsx)("div",{className:"pt-4",children:Object(x.jsxs)("h6",{children:["Developed as part of"," ",Object(x.jsx)(d.b,{to:"https://github.com/rameeznaufal/attendance-management-system",children:"DBMS final project"})]})})]}),Object(x.jsx)("img",{src:O,alt:"AMS Logo",className:"logo"})]})})},N=s(13),y=s(7),w=s(54),S=s(46),k=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(!1),r=Object(j.a)(a,2),l=r[0],u=r[1],O=Object(c.useState)(!1),f=Object(j.a)(O,2),m=f[0],p=f[1],g=Object(c.useState)(null),v=Object(j.a)(g,2),k=v[0],C=v[1],_=Object(c.useState)(!1),T=Object(j.a)(_,2),E=T[0],D=T[1],M=Object(c.useState)(!1),A=Object(j.a)(M,2),P=A[0],z=A[1],L=function(e,t){C(Object(y.a)(Object(y.a)({},k),{},Object(N.a)({},e,t)))},R=function(){var e=Object(o.a)(i.a.mark((function e(t){var c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),e.next=4,fetch("http://localhost:5000/api/users/students/"+s,{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 4:if(!(c=e.sent).ok){e.next=13;break}return e.next=8,c.json();case 8:n=e.sent,console.log(n),C(n),e.next=15;break;case 13:p(!0),C(null);case 15:return u(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,fetch("http://localhost:5000/api/users/students/"+k.reg_no,{headers:{"Content-Type":"application/json"},method:"PUT",credentials:"include",body:JSON.stringify(k)});case 3:return e.sent.ok||console.log("Could not update"),D(!1),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.next=3,fetch("http://localhost:5000/api/users/students/"+k.reg_no,{headers:{"Content-Type":"application/json"},method:"DELETE",credentials:"include"});case 3:return e.sent.ok||console.log("Could not delete"),C(null),z(!1),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/",children:"Home"})," ","> Students"]})}),Object(x.jsx)(d.b,{className:"btn btn-primary",to:"/students/add",children:Object(x.jsx)(w.c,{size:"25"})})]}),Object(x.jsxs)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:[Object(x.jsxs)(b.b,{className:"col-12 col-md-3",onSubmit:R,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)("h5",{className:"text-center mb-3",children:"Search for a student"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:s,placeholder:"Reg. No. / Email",onChange:function(e){n(e.target.value),p(!1)},required:!0,invalid:m}),Object(x.jsx)(b.c,{invalid:!0,children:"Student could not be found"})]}),Object(x.jsx)(b.d,{className:"text-center",children:Object(x.jsx)(b.a,{className:"btn btn-primary",type:"submit",style:{width:50,height:40},children:l?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(w.b,{size:"25"})})})]}),k&&Object(x.jsxs)(b.b,{className:"rounded card shadow pe-4 ps-4 pt-4 pb-2 col-12 col-md-4",children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Full Name"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:k.name,placeholder:"Full Name",onChange:function(e){L("name",e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Reg. No."}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:k.reg_no,placeholder:"Reg. No.",readOnly:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Email"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"email",value:k.email,placeholder:"Reg. No. / Email",onChange:function(e){L("email",e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Mobile No."}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"number",value:k.mobile,placeholder:"Mobile No.",onChange:function(e){L("mobile",e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{className:"text-center pt-1",children:[Object(x.jsx)(b.a,{className:"btn btn-dark",style:{width:50,height:40},onClick:F,children:E?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.b,{size:"25",color:"white"})}),Object(x.jsx)(b.a,{className:"btn btn-danger",style:{width:50,height:40},onClick:U,children:P?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.a,{size:"25",color:"white"})})]})]})]})]})},C=function(e){e.user;var t=Object(c.useState)(""),s=Object(j.a)(t,2),n=s[0],a=s[1],r=Object(c.useState)(""),l=Object(j.a)(r,2),u=l[0],O=l[1],f=Object(c.useState)(""),m=Object(j.a)(f,2),p=m[0],g=m[1],v=Object(c.useState)(""),N=Object(j.a)(v,2),y=N[0],w=N[1],S=Object(c.useState)(!1),k=Object(j.a)(S,2),C=k[0],_=k[1],T=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_(!0),e.next=4,fetch("http://localhost:5000/api/users/students/",{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({name:n,email:u,mobile:y,reg_no:p})});case 4:e.sent.ok||console.log("Could not add"),_(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/",children:"Home"})," ",">"," ",Object(x.jsx)(d.b,{className:"",to:"/students",children:"Students"}),"> Add"]})})}),Object(x.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:Object(x.jsxs)(b.b,{className:"col-12 col-md-4",onSubmit:T,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Full Name"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:n,placeholder:"Full Name",onChange:function(e){a(e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Reg. No."}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:p,onChange:function(e){g(e.target.value)},placeholder:"Reg. No.",required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Email"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"email",value:u,placeholder:"Reg. No. / Email",onChange:function(e){O(e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Mobile No."}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"number",value:y,placeholder:"Mobile No.",onChange:function(e){w(e.target.value)},required:!0})]}),Object(x.jsx)(b.d,{className:"text-center pt-1",children:Object(x.jsx)(b.a,{type:"submit",className:"btn btn-dark",style:{width:100,height:40},children:C?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Add"})})]})})]})},_=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(!1),r=Object(j.a)(a,2),l=r[0],u=r[1],O=Object(c.useState)(!1),f=Object(j.a)(O,2),m=f[0],p=f[1],g=Object(c.useState)(null),v=Object(j.a)(g,2),k=v[0],C=v[1],_=Object(c.useState)(!1),T=Object(j.a)(_,2),E=T[0],D=T[1],M=Object(c.useState)(!1),A=Object(j.a)(M,2),P=A[0],z=A[1],L=function(e,t){C(Object(y.a)(Object(y.a)({},k),{},Object(N.a)({},e,t)))},R=function(){var e=Object(o.a)(i.a.mark((function e(t){var c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),e.next=4,fetch("http://localhost:5000/api/users/staffs/"+s,{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 4:if(!(c=e.sent).ok){e.next=13;break}return e.next=8,c.json();case 8:n=e.sent,console.log(n),C(n),e.next=15;break;case 13:p(!0),C(null);case 15:return u(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,fetch("http://localhost:5000/api/users/staffs/"+k.staff_id,{headers:{"Content-Type":"application/json"},method:"PUT",credentials:"include",body:JSON.stringify(k)});case 3:return e.sent.ok||console.log("Could not update"),D(!1),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.next=3,fetch("http://localhost:5000/api/users/staffs/"+k.staff_id,{headers:{"Content-Type":"application/json"},method:"DELETE",credentials:"include"});case 3:return e.sent.ok||console.log("Could not delete"),C(null),z(!1),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/",children:"Home"})," ","> Staffs"]})}),Object(x.jsx)(d.b,{className:"btn btn-primary",to:"/staffs/add",children:Object(x.jsx)(w.c,{size:"25"})})]}),Object(x.jsxs)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:[Object(x.jsxs)(b.b,{className:"col-12 col-md-3",onSubmit:R,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)("h5",{className:"text-center mb-3",children:"Search for a staff"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:s,placeholder:"Staff ID / Email",onChange:function(e){n(e.target.value),p(!1)},required:!0,invalid:m}),Object(x.jsx)(b.c,{invalid:!0,children:"Staff could not be found"})]}),Object(x.jsx)(b.d,{className:"text-center",children:Object(x.jsx)(b.a,{className:"btn btn-primary",type:"submit",style:{width:50,height:40},children:l?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(w.b,{size:"25"})})})]}),k&&Object(x.jsxs)(b.b,{className:"rounded card shadow pe-4 ps-4 pt-4 pb-2 col-12 col-md-4",children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Full Name"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:k.name,placeholder:"Full Name",onChange:function(e){L("name",e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Staff ID"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:k.staff_id,placeholder:"Reg. No.",readOnly:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Email"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"email",value:k.email,placeholder:"Reg. No. / Email",onChange:function(e){L("email",e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Mobile No."}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"number",value:k.mobile,placeholder:"Mobile No.",onChange:function(e){L("mobile",e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{className:"text-center pt-1",children:[Object(x.jsx)(b.a,{className:"btn btn-dark",style:{width:50,height:40},onClick:F,children:E?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.b,{size:"25",color:"white"})}),Object(x.jsx)(b.a,{className:"btn btn-danger",style:{width:50,height:40},onClick:U,children:P?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.a,{size:"25",color:"white"})})]})]})]})]})},T=function(e){e.user;var t=Object(c.useState)(""),s=Object(j.a)(t,2),n=s[0],a=s[1],r=Object(c.useState)(""),l=Object(j.a)(r,2),u=l[0],O=l[1],f=Object(c.useState)(""),m=Object(j.a)(f,2),p=m[0],g=m[1],v=Object(c.useState)(""),N=Object(j.a)(v,2),y=N[0],w=N[1],S=Object(c.useState)(!1),k=Object(j.a)(S,2),C=k[0],_=k[1],T=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_(!0),e.next=4,fetch("http://localhost:5000/api/users/staffs/",{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({name:n,email:u,mobile:y,staff_id:p})});case 4:e.sent.ok||console.log("Could not add"),_(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/",children:"Home"})," ",">"," ",Object(x.jsx)(d.b,{className:"",to:"/staffs",children:"Staffs"}),"> Add"]})})}),Object(x.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:Object(x.jsxs)(b.b,{className:"col-12 col-md-4",onSubmit:T,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Full Name"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:n,placeholder:"Full Name",onChange:function(e){a(e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Reg. No."}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:p,onChange:function(e){g(e.target.value)},placeholder:"Reg. No.",required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Email"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"email",value:u,placeholder:"Reg. No. / Email",onChange:function(e){O(e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Mobile No."}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"number",value:y,placeholder:"Mobile No.",onChange:function(e){w(e.target.value)},required:!0})]}),Object(x.jsx)(b.d,{className:"text-center pt-1",children:Object(x.jsx)(b.a,{type:"submit",className:"btn btn-dark",style:{width:100,height:40},children:C?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Add"})})]})})]})},E=s(118),D=s(121),M=s(33),A=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(!1),r=Object(j.a)(a,2),l=r[0],u=r[1],O=Object(c.useState)(!1),f=Object(j.a)(O,2),m=f[0],p=f[1],g=Object(c.useState)(null),v=Object(j.a)(g,2),k=v[0],C=v[1],_=Object(c.useState)(!1),T=Object(j.a)(_,2),A=T[0],P=T[1],z=Object(c.useState)(!1),L=Object(j.a)(z,2),R=L[0],F=L[1],U=Object(c.useState)([]),q=Object(j.a)(U,2),I=q[0],B=q[1],J=Object(c.useState)(),G=Object(j.a)(J,2),H=G[0],Y=G[1],V=Object(c.useState)([]),K=Object(j.a)(V,2),Q=K[0],W=K[1],X=Object(c.useState)([]),Z=Object(j.a)(X,2),$=Z[0],ee=Z[1],te=function(){var e=Object(o.a)(i.a.mark((function e(t){var c,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),e.next=4,fetch("http://localhost:5000/api/courses/"+s,{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 4:if(!(c=e.sent).ok){e.next=16;break}return e.next=8,c.json();case 8:for(n in c=e.sent,a=[],c.staffs)a.push({value:c.staffs[n].staff_id,label:c.staffs[n].staff_name});W(a),ee(a),C(c),e.next=19;break;case 16:W([]),p(!0),C(null);case 19:return u(!1),e.abrupt("return");case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,fetch("http://localhost:5000/api/courses/"+k.course_id,{headers:{"Content-Type":"application/json"},method:"PUT",credentials:"include",body:JSON.stringify({course_name:k.course_name,staffs:$})});case 3:return e.sent.ok||console.log("Could not update"),P(!1),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,fetch("http://localhost:5000/api/courses/"+k.course_id,{headers:{"Content-Type":"application/json"},method:"DELETE",credentials:"include"});case 3:return e.sent.ok||console.log("Could not delete"),C(null),F(!1),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){Y(!0),Object(o.a)(i.a.mark((function e(){var t,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/users/staffs",{headers:{"Content-Type":"application/json"},credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=12;break}return e.next=6,t.json();case 6:for(s in t=e.sent,c=[],t)c.push({value:t[s].staff_id,label:t[s].name});B(c),e.next=14;break;case 12:console.log("Error fetching staffs"),Object(E.a)("staffs"),I=[];case 14:Y(!1);case 15:case"end":return e.stop()}}),e)})))()}),[]),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/",children:"Home"})," ","> Courses"]})}),Object(x.jsx)(d.b,{className:"btn btn-primary",to:"/courses/add",children:Object(x.jsx)(w.a,{size:"25"})})]}),H?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsxs)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:[Object(x.jsxs)(b.b,{className:"col-12 col-md-3",onSubmit:te,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)("h5",{className:"text-center mb-3",children:"Search for a course"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:s,placeholder:"Course ID / Course Name",onChange:function(e){n(e.target.value),p(!1)},required:!0,invalid:m}),Object(x.jsx)(b.c,{invalid:!0,children:"Course could not be found"})]}),Object(x.jsx)(b.d,{className:"text-center",children:Object(x.jsx)(b.a,{className:"btn btn-primary",type:"submit",style:{width:50,height:40},children:l?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(w.b,{size:"25"})})})]}),k&&Object(x.jsxs)(b.b,{className:"rounded card shadow pe-4 ps-4 pt-4 pb-2 col-12 col-md-4",children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Course Name"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:k.course_name,placeholder:"Course Name",onChange:function(e){var t,s;t="course_name",s=e.target.value,C(Object(y.a)(Object(y.a)({},k),{},Object(N.a)({},t,s)))},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Course ID"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:k.course_id,placeholder:"Course ID",readOnly:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Staffs"}),Object(x.jsx)(D.a,{defaultValue:Q,isMulti:!0,name:"staffs",options:I,onChange:function(e){ee(e)},className:"basic-multi-select",classNamePrefix:"select"})]}),Object(x.jsxs)(b.d,{className:"text-center pt-1",children:[Object(x.jsx)(b.a,{className:"btn btn-dark",style:{width:50,height:40},onClick:se,children:A?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.b,{size:"25",color:"white"})}),Object(x.jsx)(b.a,{className:"btn btn-danger",style:{width:50,height:40},onClick:ce,children:R?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.a,{size:"25",color:"white"})})]})]})]})]})},P=function(e){e.user;var t=Object(c.useState)(""),s=Object(j.a)(t,2),n=s[0],a=s[1],r=Object(c.useState)(""),l=Object(j.a)(r,2),u=l[0],O=l[1],f=Object(c.useState)(!1),m=Object(j.a)(f,2),p=m[0],g=m[1],v=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!0),e.next=4,fetch("http://localhost:5000/api/courses/",{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({course_name:n,course_id:u})});case 4:e.sent.ok||console.log("Could not add"),g(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/",children:"Home"})," ",">"," ",Object(x.jsx)(d.b,{className:"",to:"/courses",children:"Courses"}),"> Add"]})})}),Object(x.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:Object(x.jsxs)(b.b,{className:"col-12 col-md-4",onSubmit:v,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Course Name"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:n,placeholder:"Course Name",onChange:function(e){a(e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Course ID"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"text",value:u,onChange:function(e){O(e.target.value)},placeholder:"Course ID",required:!0})]}),Object(x.jsx)(b.d,{className:"text-center pt-1",children:Object(x.jsx)(b.a,{type:"submit",className:"btn btn-dark",style:{width:100,height:40},children:p?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Add"})})]})})]})},z=function(e){var t=e.user,s=Object(u.f)(),n=Object(c.useState)(null),a=Object(j.a)(n,2),r=a[0],l=a[1],b=Object(c.useState)([]),h=Object(j.a)(b,2),O=h[0],f=h[1],m=Object(c.useState)([]),g=Object(j.a)(m,2),v=g[0],N=g[1],y=Object(c.useState)([]),w=Object(j.a)(y,2),S=w[0],k=w[1],C=Object(c.useState)(""),_=Object(j.a)(C,2),T=_[0],E=_[1],D=Object(c.useState)(!0),A=Object(j.a)(D,2),P=A[0],z=A[1],L=["Absent","Present","Late"],R=window.location.href.split("/"),F=R[R.length-1],U=function(e){var t=new Date,s=t.getUTCFullYear(),c=t.getUTCMonth()+1,n=t.getUTCDate(),a=t.getUTCHours(),r=t.getUTCMinutes(),l=t.getUTCSeconds();t=new Date(s+"-"+c+"-"+n+" "+a+":"+r+":"+l);var i=function(s){j=new Date(e[s].class_date.slice(0,10)+" "+e[s].start_time),t<j?N((function(t){return[].concat(Object(p.a)(t),[e[s]])})):t-j>36e5?k((function(t){return[].concat(Object(p.a)(t),[e[s]])})):f((function(t){return[].concat(Object(p.a)(t),[e[s]])}))};for(var o in e){var j;i(o)}z(!1)};Object(c.useEffect)((function(){z(!0),f((function(e){return[]})),N((function(e){return[]})),k((function(e){return[]})),"student"===t.role||"staff"===t.role?(E(F),Object(o.a)(i.a.mark((function e(){var c,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/courses/"+F,{headers:{"Content-Type":"application/json"},credentials:"include"});case 2:if(!(c=e.sent).ok){e.next=24;break}return e.next=6,c.json();case 6:return c=e.sent,l(c),n="http://localhost:5000/api/courses/"+F+"/classes","student"===t.role&&(n=n+"/student/"+t.reg_no),e.next=12,fetch(n,{headers:{"Content-Type":"application/json"},credentials:"include"});case 12:if(!(a=e.sent).ok){e.next=20;break}return e.next=16,a.json();case 16:a=e.sent,U(a),e.next=22;break;case 20:console.log("error loading classes"),z(!1);case 22:e.next=28;break;case 24:return l(null),s("/"),z(!1),e.abrupt("return");case 28:case"end":return e.stop()}}),e)})))()):s("/")}),[F]);var q=function(e){var t=e.getHours(),s=e.getMinutes(),c=t>=12?"PM":"AM";return(t=(t%=12)||12)+":"+(s=s<10?"0"+s:s)+" "+c},I=function(e){return(e=new Date(e)).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"})},B=function(e,t,s){e=new Date(e);var c=new Date(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+t+" UTC"),n=new Date(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+s+" UTC");return q(c)+" - "+q(n)};return Object(x.jsx)("div",{children:P?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):r&&Object(x.jsxs)("div",{children:[Object(x.jsxs)("h2",{children:[r.course_name," (",r.course_id,")"]}),Object(x.jsxs)("p",{children:["Teacher",r&&r.staffs&&r.staffs.length>1&&"s",":"," ",r&&function(){var e=[];for(var t in r.staffs)e.push(r.staffs[t].staff_name);return e.join(", ")}(r.staffs)]}),Object(x.jsx)("hr",{}),t&&("staff"===t.role?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(x.jsx)(d.b,{className:"btn btn-primary",to:"/courses/"+T+"/students",children:"Manage Students"}),Object(x.jsx)(d.b,{className:"btn btn-primary",to:"/courses/"+T+"/add",children:"Add Class"})]}),Object(x.jsx)("hr",{})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)(d.b,{className:"btn btn-primary",to:"/courses/"+T+"/students/"+t.reg_no,children:"Generate Report"})}),Object(x.jsx)("hr",{})]})),O.length>0&&Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("h6",{children:"ONGOING CLASSES"}),Object(x.jsxs)("table",{className:"table table-hover",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"Class"}),Object(x.jsx)("th",{scope:"col",children:"Date & Time"}),t&&"staff"===t.role&&Object(x.jsx)("th",{scope:"col"})]})}),Object(x.jsx)("tbody",{children:O.map((function(e){return Object(x.jsxs)("tr",{className:"align-items-center",children:[Object(x.jsx)("td",{children:e.class_id}),Object(x.jsxs)("td",{children:[I(e.class_date),Object(x.jsx)("br",{}),B(e.class_date,e.start_time,e.end_time)]}),Object(x.jsx)("td",{children:t&&"student"===t.role&&(0===e.status?Object(x.jsx)(d.b,{to:"/courses/"+F+"/classes/"+e.class_id+"/mark",children:"Mark Attendance"}):L[e.status])})]})}))})]})]}),v.length>0&&Object(x.jsxs)("div",{className:"mt-4",children:[Object(x.jsx)("h6",{children:"UPCOMING CLASSES"}),Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"Class"}),Object(x.jsx)("th",{scope:"col",children:"Date & Time"}),t&&"staff"===t.role&&Object(x.jsx)("th",{scope:"col"})]})}),Object(x.jsx)("tbody",{children:v.map((function(e){return Object(x.jsxs)("tr",{className:"align-items-center",children:[Object(x.jsx)("td",{children:e.class_id}),Object(x.jsxs)("td",{children:[I(e.class_date),Object(x.jsx)("br",{}),B(e.class_date,e.start_time,e.end_time)]}),Object(x.jsx)("td",{children:t&&"staff"===t.role&&Object(x.jsx)(d.b,{to:"/courses/"+F+"/classes/"+e.class_id+"/edit",children:"Edit"})})]})}))})]})]}),S.length>0&&Object(x.jsxs)("div",{className:"mt-4",children:[Object(x.jsx)("h6",{children:"PREVIOUS CLASSES"}),Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"Class"}),Object(x.jsx)("th",{scope:"col",children:"Date & Time"}),t&&"student"===t.role&&Object(x.jsx)("th",{scope:"col",children:"Status"})]})}),Object(x.jsx)("tbody",{children:S.map((function(e){return Object(x.jsxs)("tr",{className:"align-items-center",onClick:function(){return t=e.class_id,void s("/courses/"+F+"/classes/"+t);var t},children:[Object(x.jsx)("td",{children:e.class_id}),Object(x.jsxs)("td",{children:[I(e.class_date),Object(x.jsx)("br",{}),B(e.class_date,e.start_time,e.end_time)]}),Object(x.jsx)("td",{children:t&&"student"===t.role&&Object(x.jsx)(x.Fragment,{children:L[e.status]})})]})}))})]})]})]})})},L=function(e){var t=e.user,s=Object(c.useState)((new Date).toISOString().slice(0,10)),n=Object(j.a)(s,2),a=n[0],r=n[1],l=Object(c.useState)(1),O=Object(j.a)(l,2),f=O[0],m=O[1],p=Object(c.useState)(!1),g=Object(j.a)(p,2),v=g[0],N=g[1],y=Object(c.useState)(!0),w=Object(j.a)(y,2),S=w[0],k=w[1],C=Object(c.useState)(""),_=Object(j.a)(C,2),T=_[0],E=_[1],D=Object(u.f)(),A=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N(!0),e.next=4,fetch("http://localhost:5000/api/classes/add",{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({course_id:T,class_date:a+" 00:00:00",slot_id:f})});case 4:if(!e.sent.ok){e.next=10;break}return D("/courses/"+T),e.abrupt("return");case 10:console.log("Error Adding Class");case 11:return N(!1),e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(k(!0),"staff"===t.role){var e=window.location.href.split("/");E(e[e.length-2]),Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/api/courses/"+e[e.length-2],{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 2:if(!t.sent.ok){t.next=7;break}k(!1),t.next=10;break;case 7:return D("/"),k(!1),t.abrupt("return");case 10:case"end":return t.stop()}}),t)})))()}else D("/")}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/courses/"+T,children:T})," ","> Add Class"]})})}),S?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:Object(x.jsxs)(b.b,{className:"col-12 col-md-4",onSubmit:A,children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Date"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"date",value:a,onChange:function(e){console.log(e.target.value),r(e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Slot"}),Object(x.jsxs)("select",{class:"form-select","aria-label":"Slot selection",onChange:function(e){m(e.target.value)},children:[Object(x.jsx)("option",{selected:!0,value:"1",children:"A (8 AM - 9 AM)"}),Object(x.jsx)("option",{value:"2",children:"B (9 AM - 10 AM)"}),Object(x.jsx)("option",{value:"3",children:"C (10:15 AM - 11:15 AM)"}),Object(x.jsx)("option",{value:"4",children:"D (11:15 AM - 12: 15 PM)"}),Object(x.jsx)("option",{value:"5",children:"E (2 PM - 5 PM)"})]})]}),Object(x.jsx)(b.d,{className:"text-center pt-1",children:Object(x.jsx)(b.a,{type:"submit",className:"btn btn-dark",style:{width:100,height:40},children:v?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Add"})})]})})]})},R=function(e){var t=e.user,s=Object(c.useState)((new Date).toISOString().slice(0,10)),n=Object(j.a)(s,2),a=n[0],r=n[1],l=Object(c.useState)(0),O=Object(j.a)(l,2),f=O[0],m=O[1],p=Object(c.useState)(!1),g=Object(j.a)(p,2),v=g[0],N=g[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),k=w[0],C=w[1],_=Object(c.useState)(!1),T=Object(j.a)(_,2),E=T[0],D=T[1],A=Object(u.f)(),P=window.location.href.split("/"),z=P[P.length-4],L=P[P.length-2],R=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N(!0),e.next=4,fetch("http://localhost:5000/api/classes/"+L+"/course/"+z,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify({course_id:z,class_date:a+" 00:00:00",slot_id:f})});case 4:if(!e.sent.ok){e.next=10;break}return N(!1),e.abrupt("return");case 10:console.log("Error Editing Class");case 11:return N(!1),e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),C(!0),e.next=4,fetch("http://localhost:5000/api/classes/"+L+"/course/"+z,{headers:{"Content-Type":"application/json"},credentials:"include",method:"DELETE"});case 4:if(!e.sent.ok){e.next=11;break}return A("/courses/"+z),N(!1),e.abrupt("return");case 11:console.log("Error Deleting Class");case 12:return N(!1),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=new Date(e),s=""+(t.getMonth()+1),c=""+t.getDate(),n=t.getFullYear();return s.length<2&&(s="0"+s),c.length<2&&(c="0"+c),[n,s,c].join("-")};return Object(c.useEffect)((function(){D(!0),"staff"===t.role?Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/classes/"+L+"/course/"+z,{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=12;break}return e.next=6,t.json();case 6:t=e.sent,r(U(t.class_date)),m(t.slot_id),D(!1),e.next=15;break;case 12:return A("/"),D(!1),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))():A("/")}),[z,L]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/courses/"+z,children:z})," ","> Edit Class"]})})}),E?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:Object(x.jsxs)(b.b,{className:"col-12 col-md-4",children:[Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Date"}),Object(x.jsx)(b.e,{className:"col-lg-6",type:"date",value:a,onChange:function(e){r(e.target.value)},required:!0})]}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.f,{children:"Slot"}),Object(x.jsxs)("select",{class:"form-select","aria-label":"Slot selection",onChange:function(e){m(e.target.value)},children:[Object(x.jsx)("option",{value:"1",selected:1===f&&"true",children:"A (8 AM - 9 AM)"}),Object(x.jsx)("option",{value:"2",selected:2===f&&"true",children:"B (9 AM - 10 AM)"}),Object(x.jsx)("option",{value:"3",selected:3===f&&"true",children:"C (10:15 AM - 11:15 AM)"}),Object(x.jsx)("option",{value:"4",selected:4===f&&"true",children:"D (11:15 AM - 12: 15 PM)"}),Object(x.jsx)("option",{value:"5",selected:5===f&&"true",children:"E (2 PM - 5 PM)"})]})]}),Object(x.jsxs)(b.d,{className:"text-center pt-1",children:[Object(x.jsx)(b.a,{onClick:R,className:"btn btn-dark me-3",style:{width:50,height:40},children:v?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.b,{size:"25"})}),Object(x.jsx)(b.a,{onClick:F,className:"btn btn-danger",style:{width:50,height:40},children:k?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(x.jsx)(S.a,{color:"white",size:"25"})})]})]})})]})},F=function(e){var t=e.user,s=Object(u.f)(),n=Object(c.useState)(!0),a=Object(j.a)(n,2),r=a[0],l=a[1],O=Object(c.useState)(!1),f=Object(j.a)(O,2),m=f[0],p=f[1],g=Object(c.useState)(!1),v=Object(j.a)(g,2),N=v[0],y=v[1],w=Object(c.useState)(!1),S=Object(j.a)(w,2),k=S[0],C=S[1],_=Object(c.useState)(2),T=Object(j.a)(_,2),E=T[0],D=T[1],A=window.location.href.split("/"),P=A[A.length-4],z=A[A.length-2],L=function(){var e=Object(o.a)(i.a.mark((function e(c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),p(!0),e.next=4,fetch("http://localhost:5000/api/attendance/mark",{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({course_id:P,class_id:z,reg_no:t.reg_no,status:E})});case 4:if(!e.sent.ok){e.next=11;break}return s("/courses/"+P),p(!1),e.abrupt("return");case 11:console.log("Error marking attendance"),p(!1);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){l(!0),y(!1),"student"===t.role?Object(o.a)(i.a.mark((function e(){var c,n,a,r,o,j,d,u,b,h,O,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/attendance/courses/"+P+"/classes/"+z+"/students/"+t.reg_no,{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 2:if(!(c=e.sent).ok){e.next=36;break}return e.next=6,c.json();case 6:if(c=e.sent,console.log(c),n=new Date,a=new Date(c.class_date),n.setHours(0,0,0,0),a.setHours(0,0,0,0),1!==c.attendance_status&&2!==c.attendance_status){e.next=16;break}return y(!0),l(!1),e.abrupt("return");case 16:if(r=new Date,o=r.getUTCFullYear(),j=r.getUTCMonth()+1,d=r.getUTCDate(),u=r.getUTCHours(),b=r.getUTCMinutes(),h=r.getUTCSeconds(),r=new Date(o+"-"+j+"-"+d+" "+u+":"+b+":"+h),36e5,O=3e5,x=new Date(c.class_date.slice(0,10)+" "+c.start_time),!(r<x||r-x>36e5)){e.next=32;break}return s("/courses/"+P),e.abrupt("return");case 32:r-x>O&&C(!0);case 33:l(!1),e.next=39;break;case 36:return s("/"),l(!1),e.abrupt("return");case 39:case"end":return e.stop()}}),e)})))():s("/")}),[P,z]),Object(x.jsx)("div",{children:r?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/courses/"+P,children:P})," ","> Mark Attendance"]})}),N?Object(x.jsx)("h6",{className:"mt-4",children:"Attendance already marked"}):Object(x.jsxs)("form",{onSubmit:L,className:"shadow rounded mt-4 p-3",children:[Object(x.jsxs)("div",{className:"text-center",children:[Object(x.jsxs)("div",{className:"form-check form-check-inline",children:[Object(x.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",value:"1",disabled:k,onChange:function(e){D(e.target.value)}}),Object(x.jsx)("label",{className:"form-check-label",for:"inlineRadio1",children:"Present"})]}),Object(x.jsxs)("div",{className:"form-check form-check-inline",children:[Object(x.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:"2",onChange:function(e){D(e.target.value)}}),Object(x.jsx)("label",{className:"form-check-label",for:"inlineRadio2",children:"Late"})]}),Object(x.jsxs)("div",{className:"form-check form-check-inline",children:[Object(x.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio3",value:"0",onChange:function(e){D(e.target.value)}}),Object(x.jsx)("label",{className:"form-check-label",for:"inlineRadio3",children:"Absent"})]})]}),Object(x.jsx)("div",{className:"text-center mt-3",children:Object(x.jsx)(b.a,{type:"submit",className:"btn btn-dark",style:{width:100,height:40},children:m?Object(x.jsx)(h.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Mark"})})]})]})})},U=s(30),q=s(99);U.d.register([U.l,U.f,U.a]);var I=function(e){var t=e.user,s=Object(c.useState)(!0),n=Object(j.a)(s,2),a=n[0],r=n[1],l=Object(u.f)(),b=window.location.href.split("/"),h=b[b.length-3],O=b[b.length-1],f=Object(c.useState)([]),m=Object(j.a)(f,2),p=m[0],g=m[1];return Object(c.useEffect)((function(){r(!0),"staff"===t.role||t.reg_no===O?Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/classes/students/"+O+"/courses/"+h,{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=12;break}return e.next=6,t.json();case 6:t=e.sent,console.log(t),g([t.present,t.absent,t.late]),r(!1),e.next=15;break;case 12:return l("/"),r(!1),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))():l("/")}),[h,O]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/courses/"+h,children:h})," ","> Attendance Statistics"]})})}),a?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center flex-column",children:[Object(x.jsx)("div",{className:"text-center mb-3 col-sm-4",children:Object(x.jsx)(q.a,{data:{labels:["Present","Absent","Late"],datasets:[{label:"Student attendance statistics",data:p,backgroundColor:["rgb(119, 221, 119)","rgb(255, 99, 132)","rgb(255, 205, 86)"],hoverOffset:4}]},options:{tooltips:{enabled:!0},legend:{display:!0,position:"right"}}})}),Object(x.jsx)("div",{className:"text-center",children:Object(x.jsxs)("h5",{children:["Present: ",p[0]," (",Math.round(p[0]/(p[0]+p[1]+p[2])*100).toFixed(2),"%)",Object(x.jsx)("br",{}),"Absent: ",p[1]," (",Math.round(p[1]/(p[0]+p[1]+p[2])*100).toFixed(2),"%)",Object(x.jsx)("br",{}),"Late: ",p[2]," (",Math.round(p[2]/(p[0]+p[1]+p[2])*100).toFixed(2),"%)",Object(x.jsx)("br",{}),"Total: ",p[0]+p[1]+p[2]]})})]})]})},B=function(e){var t=e.user,s=Object(c.useState)(!0),n=Object(j.a)(s,2),a=n[0],r=n[1],l=Object(c.useState)([]),b=Object(j.a)(l,2),h=b[0],O=b[1],f=Object(u.f)(),m=window.location.href.split("/"),p=m[m.length-2];Object(c.useEffect)((function(){r(!0),O([]),"staff"===t.role?Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/courses/"+p+"/students",{headers:{"Content-Type":"application/json"},credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=11;break}return e.next=6,t.json();case 6:t=e.sent,O(t),r(!1),e.next=15;break;case 11:return O([]),f("/"),r(!1),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))():f("/")}),[p]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/courses/"+p,children:p})," ","> Manage Students"]})})}),a?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center shadow rounded p-3 mb-3",children:Object(x.jsxs)("table",{class:"table table-hover",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"Roll No."}),Object(x.jsx)("th",{scope:"col",children:"Full Name"})]})}),Object(x.jsx)("tbody",{children:h.map((function(e){return Object(x.jsxs)("tr",{onClick:function(){return t=e.reg_no,void f("/courses/"+p+"/students/"+t);var t},children:[Object(x.jsx)("td",{children:e.reg_no}),Object(x.jsx)("td",{children:e.name})]})}))})]})})]})};U.d.register([U.l,U.f,U.a]);var J=function(e){var t=e.user,s=Object(c.useState)(!0),n=Object(j.a)(s,2),a=n[0],r=n[1],l=Object(u.f)(),b=window.location.href.split("/"),h=b[b.length-3],O=b[b.length-1],f=Object(c.useState)([]),m=Object(j.a)(f,2),p=m[0],g=m[1],v=Object(c.useState)([]),N=Object(j.a)(v,2),y=N[0],w=N[1],S=Object(c.useState)([]),k=Object(j.a)(S,2),C=k[0],_=k[1],T=Object(c.useState)([]),E=Object(j.a)(T,2),D=E[0],A=E[1];Object(c.useEffect)((function(){r(!0),"staff"===t.role?Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/classes/"+O+"/course/"+h+"/stat",{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=15;break}return e.next=6,t.json();case 6:t=(t=e.sent)[0],w(t.present),A(t.late),_(t.absent),g([t.present.length,t.absent.length,t.late.length]),r(!1),e.next=18;break;case 15:return l("/"),r(!1),e.abrupt("return");case 18:case"end":return e.stop()}}),e)})))():l("/")}),[h,O]);var P=function(e){l("/courses/"+h+"/students/"+e)};return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h5",{children:[Object(x.jsx)(d.b,{className:"",to:"/courses/"+h,children:h})," ","> Attendance Statistics"]})})}),a?Object(x.jsx)("div",{className:"container text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsxs)("div",{className:"d-flex w-100 flex-column",children:[Object(x.jsx)("div",{className:"text-center mb-3",children:Object(x.jsx)(q.a,{data:{labels:["Present","Absent","Late"],datasets:[{label:"Class attendance statistics",data:p,backgroundColor:["rgb(119, 221, 119)","rgb(255, 99, 132)","rgb(255, 205, 86)"],hoverOffset:4}]},options:{tooltips:{enabled:!0},maintainAspectRatio:!1,responsive:!0,legend:{display:!0,position:"right"}}})}),Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)("div",{className:"col-4",children:Object(x.jsxs)("table",{class:"table table-hover",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:Object(x.jsxs)("th",{scope:"col",className:"text-success",children:["Present (",y.length?y.length:0,")"]})})}),Object(x.jsx)("tbody",{children:y.map((function(e){return Object(x.jsx)("tr",{onClick:function(){return P(e.reg_no)},children:Object(x.jsx)("td",{children:e.name})})}))})]})}),Object(x.jsx)("div",{className:"col-4",children:Object(x.jsxs)("table",{class:"table table-hover",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:Object(x.jsxs)("th",{scope:"col",className:"text-danger",children:["Absent (",C.length?C.length:0,")"]})})}),Object(x.jsx)("tbody",{children:C.map((function(e){return Object(x.jsx)("tr",{onClick:function(){return P(e.reg_no)},children:Object(x.jsx)("td",{children:e.name})})}))})]})}),Object(x.jsx)("div",{className:"col-4",children:Object(x.jsxs)("table",{class:"table table-hover",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:Object(x.jsxs)("th",{scope:"col",className:"text-warning",children:["Late (",D.length?D.length:0,")"]})})}),Object(x.jsx)("tbody",{children:D.map((function(e){return Object(x.jsx)("tr",{onClick:function(){return P(e.reg_no)},children:Object(x.jsx)("td",{children:e.name})})}))})]})})]})]})]})},G=s(189),H=s(191),Y=s(190),V=function(e){var t=e.user,s=e.setUser,c=e.courses,n=Object(u.f)(),a=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),e.next=3,fetch("http://localhost:5000/api/users/logout",{headers:{"Content-Type":"application/json"},credentials:"include"});case 3:n("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(G.a,{bg:"dark",variant:"dark",expand:"md",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(G.a.Brand,{children:Object(x.jsx)(d.b,{to:"/",style:{textDecoration:"none",color:"white"},children:"Attendance Management System"})}),t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(G.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsx)(H.a,{className:"me-auto",children:("student"===t.role||"staff"===t.role)&&0!==c.length&&Object(x.jsx)(Y.a,{title:"Courses",id:"basic-nav-dropdown",children:c&&c.map((function(e){return Object(x.jsx)(Y.a.Item,{children:Object(x.jsx)(d.b,{to:"/courses/"+e.course_id,style:{textDecoration:"none",color:"black"},children:e.course_name+" ("+e.course_id+")"},e.course_id)})}))})}),Object(x.jsx)(H.a,{children:Object(x.jsx)(H.a.Link,{onClick:a,children:"Logout"})})]})]})]})})};s(178);var K=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(null),r=Object(j.a)(a,2),l=r[0],b=r[1],h=Object(c.useState)([]),O=Object(j.a)(h,2),f=O[0],m=O[1];return Object(c.useEffect)((function(){n(!0),Object(o.a)(i.a.mark((function e(){var t,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/users/verify",{headers:{"Content-Type":"application/json"},credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=19;break}return e.next=6,t.json();case 6:if(t=e.sent,b(t),"student"!==t.role&&"staff"!==t.role){e.next=17;break}return e.next=11,fetch("http://localhost:5000/api/users/"+t.role+"/"+t.reg_no+"/courses",{headers:{"Content-Type":"application/json"},credentials:"include"});case 11:return s=e.sent,e.next=14,s.json();case 14:s=e.sent,m(s),n(!1);case 17:e.next=21;break;case 19:b(null),n(!1);case 21:case"end":return e.stop()}}),e)})))()}),[]),Object(x.jsx)("div",{children:s?Object(x.jsx)("div",{className:"text-center mt-5",children:Object(x.jsx)(M.BeatLoader,{loading:!0})}):Object(x.jsxs)(d.a,{children:[Object(x.jsx)(V,{user:l,setUser:b,courses:f}),Object(x.jsx)("div",{className:"container pt-4",children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{path:"/",exact:!0,element:Object(x.jsx)(v,{user:l,setUser:b,courses:f,setCourses:m})}),l&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(u.a,{path:"/students",exact:!0,element:Object(x.jsx)(k,{user:l})}),Object(x.jsx)(u.a,{path:"/students/add",exact:!0,element:Object(x.jsx)(C,{user:l})}),Object(x.jsx)(u.a,{path:"/staffs",exact:!0,element:Object(x.jsx)(_,{user:l})}),Object(x.jsx)(u.a,{path:"/staffs/add",exact:!0,element:Object(x.jsx)(T,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/add",exact:!0,element:Object(x.jsx)(P,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:course_id/classes/:class_id/mark",exact:!0,element:Object(x.jsx)(F,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:id/add",exact:!0,element:Object(x.jsx)(L,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:id/students",exact:!0,element:Object(x.jsx)(B,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:id/students/:reg_no",exact:!0,element:Object(x.jsx)(I,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:cid/classes/:classid/edit",exact:!0,element:Object(x.jsx)(R,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:id",exact:!0,element:Object(x.jsx)(z,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:courseid/classes/:classid",exact:!0,element:Object(x.jsx)(J,{user:l})}),Object(x.jsx)(u.a,{path:"/courses/:courseid/classes/:classid/students/:reg_no",exact:!0,element:Object(x.jsx)(I,{user:l})}),Object(x.jsx)(u.a,{path:"/courses",exact:!0,element:Object(x.jsx)(A,{user:l})})]})]})})]})})},Q=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,192)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),c(e),n(e),a(e),r(e)}))};r.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(K,{})}),document.getElementById("root")),Q()}},[[179,1,2]]]);
//# sourceMappingURL=main.8f356c92.chunk.js.map